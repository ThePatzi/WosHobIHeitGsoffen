<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/app-pouchdb/app-pouchdb-document.html">

<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../whihg-list/whihg-list.html">
<link rel="import" href="./test.html">

<dom-module id="WosHobIHeitGsoffen-app">
  <template>
    <style is="custom-style" include="iron-flex iron-flex-alignment"></style>
    <style>
      :host {
        display: block;
        
        --paper-card-content: {
          padding: 10px;
        };
      }
      
      .main-header {
        background-color: #3d5afe;
        color: #eee;
      }
      
      app-header paper-icon-button {
        --paper-icon-button-ink-color: white;
      }
      
      .content {
        margin: 5px;
      }
      
      .content paper-card {
        width: 500px;
      }
      
      @media (max-width: 500px) {
        .content {
          margin: 5px 0 0 0;
          height: 100%;
        }
        
        .content paper-card {
          width: 100%;
          height: 100%;
          max-height: 100%;
        }
      }
    
    </style>
    
    <app-drawer-layout force-narrow fullbleed>
      <app-drawer id="drawer">
        <app-toolbar></app-toolbar>
      </app-drawer>
      
      <app-header-layout fullbleed>
        <app-header class="main-header">
          <app-toolbar>
            <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
            <div spacer main-title>Wos hob i heite gsoffen</div>
          </app-toolbar>
        </app-header>
        <div class="vertical layout center content">
          <paper-card heading="Liste" on-vaadin-long-touch="_test">
            <div class="card-content">
              <whihg-list items="{{value.items}}"
                          on-show-toast="__handleShowToast"></whihg-list>
            </div>
          </paper-card>
        </div>
      </app-header-layout>
    </app-drawer-layout>
    
    <paper-toast id="toast"></paper-toast>
    
    <app-pouchdb-document
        db-name="woshobigsoffn"
        doc-id="list"
        data="{{value}}">
    </app-pouchdb-document>
    
    <app-pouchdb-document
        db-name="woshobigsoffn"
        doc-id="__favorites__"
        data="{{favorites}}">
    </app-pouchdb-document>
  
  </template>
  
  <script>
    Polymer({
      
      is: 'WosHobIHeitGsoffen-app',
      
      properties: {
        value: {
          type: Object,
          notify: true,
          value: {items: []}
        },
        
        favorites: {
          type: Object,
          notify: true,
          value: {items: []}
        }
        
      },
  
      _test:function (e) {
        console.log(e);
      },
      
      __handleShowToast: function (e) {
        this._showToast(e.detail.message);
      },
      
      _showToast: function (text) {
        this.$.toast.text = text;
        this.$.toast.open();
      }
      
    });
  </script>
</dom-module>
 